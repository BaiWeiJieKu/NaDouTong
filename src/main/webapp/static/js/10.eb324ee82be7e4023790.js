webpackJsonp([10],{GiXP:function(e,t){},PORy:function(e,t){},dqex:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("aozt"),i=a.n(n),l={name:"myTeamSerch",data:function(){return{formItem:{captainname:"",fleetname:"",page:1},formRule:{},data:[],captions:[]}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?t.$emit("handleOptionsSearch",t.formItem):t.$Message.error("请填写必填字段")})},handleTeam:function(){i.a.get("/api/driverTeam.json").then(this.headleTeamSucc)},headleTeamSucc:function(e){(e=e.data).ret&&(this.captions=e.data)}},mounted:function(){this.handleTeam()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("Form",{ref:"formItem",attrs:{model:e.formItem,rules:e.formRule,"label-position":"left","label-width":60,inline:""}},[a("FormItem",{attrs:{label:"车队名称",prop:"numberPlate"}},[a("Select",{attrs:{filterable:""},model:{value:e.formItem.fleetname,callback:function(t){e.$set(e.formItem,"fleetname",t)},expression:"formItem.fleetname"}},e._l(e.captions,function(t){return a("Option",{key:t.fleetname,attrs:{value:t.fleetname}},[e._v(e._s(t.fleetname))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"队长姓名",prop:"roadTransportCertificate"}},[a("Select",{attrs:{filterable:""},model:{value:e.formItem.captainname,callback:function(t){e.$set(e.formItem,"captainname",t)},expression:"formItem.captainname"}},e._l(e.captions,function(t){return a("Option",{key:t.captainname,attrs:{value:t.captainname}},[e._v(e._s(t.captainname))])}))],1),e._v(" "),a("FormItem",{staticStyle:{"margin-left":"-60px"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formItem")}}},[e._v("查询")])],1)],1)],1)},staticRenderFns:[]};var s={name:"myTeam",data:function(){var e=this;return{showAdd:!0,deleteStatus:!1,query:{},datas:[],href:"",dataId:"",dataTotal:0,searchItems:{},loading:!1,status:!1,temp:{id:"",captainname:"",fleetname:"",captaintel:"",mark:""},ruleValidate:{captainname:[{required:!0,message:"请输入队长姓名",trigger:"blur"}],fleetname:[{required:!0,message:"请输入车队名称",trigger:"blur"}],captaintel:[{required:!0,validator:function(e,t,a){""===t?a(new Error("联系方式不可以为空")):/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/.test(t)?a():a(new Error("联系方式格式不正确"))},trigger:"blur"}]},titles:[{type:"selection",align:"center",width:50,fixed:"left"},{title:"序号",key:"sequence",width:70,fixed:"left",align:"center",render:function(e,t){return e("div",[e("span",{props:{type:"primary",size:"small"},style:{marginRight:"5px"}},t.index+1)])}},{title:"车队名称",key:"fleetname",align:"center",fixed:"left"},{title:"队长名称",key:"captainname",align:"center"},{title:"电话",key:"captaintel",align:"center"},{title:"备注",key:"mark",align:"center",tooltip:!0},{title:"编辑",key:"id",width:150,fixed:"right",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.dataIndex=a.index,e.show(a.row)}}},"修改"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deleteStatus=!0,e.dataId=a.row.id}}},"删除")])}}]}},components:{myTeamSearch:a("C7Lr")(l,r,!1,function(e){a("GiXP")},"data-v-266daa90",null).exports,Table:a("8Wy1").a},methods:{handleSearch:function(e){this.query=e,this.loading=!0,i.a.get("/api/myTeam.json",{params:e}).then(this.getOptionsSucc)},getOptionsSucc:function(e){this.loading=!1,(e=e.data).ret&&e.data&&(this.datas=e.data.data,this.dataTotal=e.data.total)},deleteSucc:function(){this.handleSearch(this.query)},pageChange:function(e){this.query.page=e,this.handleSearch(this.query)},handleInsert:function(){this.clearModel(),this.status=!0,this.href="/api/insertMyTeam.json"},right:function(){var e=this;this.$refs.temp.validate(function(t){t&&(e.loading=!0,i.a.get(e.href,{params:e.temp}).then(e.insertSucc))})},cancel:function(){this.status=!1,this.$refs.temp.resetFields()},otherCancel:function(e){e||this.cancel()},insertSucc:function(e){e=e.data,this.loading=!1,e.ret&&this.handleSearch(this.query),this.status=!1},clearModel:function(){for(var e in this.temp)this.temp[e]=""},handleDelete:function(e){i.a.get("/api/deleteMyTeam.json",{params:{ids:this.dataId}}).then(this.handleDeleteSucc)},handleDeleteSucc:function(e){this.deleteStatus=!1,(e=e.data).ret?this.handleSearch(this.query):this.$Notice.error({desc:"删除失败",duration:0})},deleteAll:function(e){i.a.get("/api/deleteMyTeam.json",{params:{ids:e.toString()}}).then(this.handleDeleteSucc)},show:function(e){this.status=!0,this.temp.id=e.id,this.temp.captainname=e.captainname,this.temp.captaintel=e.captaintel,this.temp.fleetname=e.fleetname,this.temp.mark=e.mark,this.href="/api/updeteMyTeam.json"}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("myTeamSearch",{on:{handleOptionsSearch:e.handleSearch}}),e._v(" "),a("Table",{attrs:{page:e.query.page,titles:e.titles,datas:e.datas,total:e.dataTotal,loading:e.loading,show:e.showAdd},on:{handleInsert:e.handleInsert,deleteAll:e.deleteAll,pageChange:e.pageChange}}),e._v(" "),a("Modal",{attrs:{"mask-closable":!1,"footer-hide":!0,"ok-text":"确定","cancel-text":"取消",width:"500",styles:{top:"20px"}},on:{"on-visible-change":e.otherCancel},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("Form",{ref:"temp",staticStyle:{"margin-top":"20px"},attrs:{model:e.temp,rules:e.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"队长姓名",prop:"captainname"}},[a("Input",{attrs:{placeholder:"队长姓名"},model:{value:e.temp.captainname,callback:function(t){e.$set(e.temp,"captainname",t)},expression:"temp.captainname"}})],1),e._v(" "),a("FormItem",{attrs:{label:"车队名称",prop:"fleetname"}},[a("Input",{attrs:{placeholder:"车队名称"},model:{value:e.temp.fleetname,callback:function(t){e.$set(e.temp,"fleetname",t)},expression:"temp.fleetname"}})],1),e._v(" "),a("FormItem",{attrs:{label:"联系方式",prop:"captaintel"}},[a("Input",{attrs:{placeholder:"联系方式"},model:{value:e.temp.captaintel,callback:function(t){e.$set(e.temp,"captaintel",t)},expression:"temp.captaintel"}})],1),e._v(" "),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:e.temp.mark,callback:function(t){e.$set(e.temp,"mark",t)},expression:"temp.mark"}})],1),e._v(" "),a("FormItem",[a("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[a("Button",{staticClass:"button",attrs:{size:"large",type:"success"},on:{click:e.right}},[e._v("确定")]),e._v(" "),a("Button",{staticClass:"button",attrs:{size:"large",type:"info"},on:{click:e.cancel}},[e._v("取消")])],1)])],1)],1),e._v(" "),a("Modal",{attrs:{"ok-text":"删除","cancel-text":"取消","class-name":"vertical-center-modal"},on:{"on-ok":e.handleDelete},model:{value:e.deleteStatus,callback:function(t){e.deleteStatus=t},expression:"deleteStatus"}},[a("p",[e._v("确定删除吗")])])],1)},staticRenderFns:[]};var c=a("C7Lr")(s,o,!1,function(e){a("PORy")},"data-v-4d6678ae",null);t.default=c.exports}});